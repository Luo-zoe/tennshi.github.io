{% unless site.duoshuo_shortname
  or site.disqus_shortname
  or site.hypercomments_id
  or site.gentie_productKey
  or site.duoshuo and site.duoshuo.shortname %}
{% if site.valine_comment.enable %}
<script src="//code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js"></script>
<!-- 魔改版 Valine.min.js -->
<script src='//cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#comments',
        app_id: '{{ site.valine_comment.leancloud_appid }}',   //这里变量的取值在网站配置文件里_config.yml
        app_key: '{{ site.valine_comment.leancloud_appkey }}', //这里变量的取值在网站配置文件里_config.yml
        placeholder: '{{ site.valine_comment.placeholder }}',    //这里变量的取值在网站配置文件里_config.yml
        avatar: 'wavatar',
        master: 'b321a322632fe65a4ce24dc62a3caaa1',   //博主邮箱md5
        tagMeta: ["博主","小伙伴","访客"],     //标识字段名
        metaPlaceholder: {"nick":"昵称/QQ号","mail":"邮箱（完全保密）"},
        recordIP: '{{site.valine_comment.recordIP}}',
        enableQQ: '{{site.valine_comment.enableQQ}}'
        // serverURLs: '{{ site.valine_comment.serverURLs }}'
    });
</script>
<style>
    /* valine 评论框增加背景图片 */
    #vcomments textarea {
        box-sizing: border-box;
        background: url("/assets/images/comment_bg.png") 100% 100% no-repeat;
    }
    #vcomments p {
        margin: 8px 0;
    }
    .v[data-class=v] .vcards .vcard .vquote {
        padding-left: .5em;
    }
    .v[data-class=v] .vcards .vcard .vimg {
        margin: 0 .7525em 0 0;
    }

    .v[data-class=v] .vwrap,
    .v[data-class=v] .vbtn {
        border-color: #ccc;
    }
    /*.v[data-class=v] .vcards > .vcard:last-child .vh*/
    /*.v[data-class=v] .vcards > .vcard > .vh {*/
    /*    border-bottom: 1px solid #e4e4e4;*/
    /*}*/
    .v[data-class="v"] .vcards .vcard .vquote {
        border-left: none;
    }

    /*设置评论头像旋转*/
    .v .vcards .vcard .vimg:hover {
        -webkit-animation: vimg-transform .8s linear;
                animation: vimg-transform .8s linear;
    }
    @-webkit-keyframes vimg-transform {
        0%      {-webkit-transform:rotate(0deg);}
        50%     {-webkit-transform:rotate(180deg);}
        100%    {-webkit-transform:rotate(360deg);}
    }
    @keyframes vimg-transform {
        0%      {transform:rotate(0deg);}
        50%     {transform:rotate(180deg);}
        100%    {transform:rotate(360deg);}
    }
</style>
{% endif %}
{% endunless %}
